<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Dev/grsecurity - Kicksecure
 url: ../Dev/grsecurity
-->
<head>
<meta charset="utf-8"/>
<title>Dev/grsecurity - Kicksecure</title>
<link rel=stylesheet type=text/css href=../style.css>




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.37.1" name="generator"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="@Kicksecure" name="twitter:site"/>
<meta content="summary_large_image" name="twitter:card"/>
<link data-href="/w/index.php?title=Dev/grsecurity&amp;action=edit" href="https://www.kicksecure.com/w/index.php?title=Dev/grsecurity&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Dev/grsecurity&amp;action=edit" href="https://www.kicksecure.com/w/index.php?title=Dev/grsecurity&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/favicon.ico" href="https://www.kicksecure.com/favicon.ico" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.kicksecure.com/w/opensearch_desc.php" rel="search.html" title="Kicksecure (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.kicksecure.com/w/api.php?action=rsd" href="https://www.kicksecure.com/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/wiki/WgRightsPage" href="../WgRightsPage" rel="license"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.kicksecure.com/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Kicksecure Atom feed" type="application/atom+xml"/>
<noscript></noscript>

<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Dev/grsecurity" property="og:title"/>
<meta content="Kicksecure" property="og:site_name"/>
<meta content="../Dev/grsecurity" property="og:url"/>
<meta content="https://www.kicksecure.com/w/resources/assets/wiki.png" property="og:image"/>
<meta content="2022-02-21T20:17:40Z" property="article:modified_time"/>
<meta content="2022-02-21T20:17:40Z" property="article:published_time"/>

</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Dev_grsecurity rootpage-Dev skin-vector action-view skin-vector-legacy"><div class="noprint" id="mw-page-base"></div>
<div class="noprint" id="mw-head-base"></div>
<div class="mw-body" id="content" role="main">
<a id="top"></a>
<div id="siteNotice"><div id="mw-dismissablenotice-anonplace"></div></div>
<div class="mw-indicators">
</div>
<h1 class="firstHeading" id="firstHeading">Dev/grsecurity</h1>
<div class="vector-body" id="bodyContent">
<div class="noprint" id="siteSub">From Kicksecure</div>
<div id="contentSub"><span class="subpages">&lt; <a class="mw-redirect" data-href="/wiki/Dev" href="../Dev.html" title="Dev">Dev</a></span></div>
<div id="contentSub2"></div>
<div id="jump-to-nav"></div>
<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
<a class="mw-jump-link" href="#searchInput">Jump to search</a>
<div class="mw-body-content mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><p>original idea:
</p><p>grsecurity compilation VM, so we would not decrease usability too much, by taking a lot compilation time per updated per Template. Doing it per VM, would be even worse usability wise (takes even longer to update).
</p><p>We would like to have a Debian source grsecurity package in offical Debian repository, that we can use to compile a grsecurity kernel. Compilation would happen on user's machines in a yet to be invented grsecurity compilation VM. The purpose of that VM is to spare the user from having to compile its kernel multiple times for multiple templates. Compiling the kernel on the user's machine provides better security due to grsecurity compile time features such as randomization. User upgrades → new grsecurity source package upgrade found by APT → grsecurity compilation VM starts → downloads upgraded grsecurity source package → perhaps minor automated configuration changes (Xen...) → grsecurity kernel gets compiled → sent to dom0 → used after dom0 / VM restart respectively.
</p><p>contra:
</p><p>grsecurity compilation VM could be compromised:
</p><p>Two ways:
</p>
<ul><li>bug / backdoor in compilation scripts itself (unlikely, but still possible)</li>
<li>template used for that compilation VM is already compromised</li></ul>
<p>The later one is especially tricky. In theory you could use "the most trusted template". But in some cases there may be no such thing. For example you trust one template for some activities (like Fedora, for business stuff, where X is not your adversary), but with other activities not and use Debian/Archlinux there.
</p><p>Having one compilation VM means compromising one of this template will give you access to every VM.
</p><p>This should not be overrated. If you use the same kernel binary in all the VMs, compromised VM can learn those randomized parts and use this knowledge in attack to other VMs. Or leak this to some external attacker for future use. This still makes harder to prepare an exploit for all Qubes installation, but not as hard as for non-Qubes threat model. To get the security benefits as in non-Qubes, you'd need to compile the kernel for each VM (not only template) separately...
</p><p>Maybe it worth to do it for selected VMs? And for others use binary package from repository.
</p><p>Another idea... Perhaps rather than a grsecurity compilation VM, it
could be a grsecurity administrator VM?
</p><p>- it would orchestrate starting VM by VM, one at a time
</p><p>- compile grsecurity kernel VM by VM inside the target VM, not inside
the grsecurity administration VM
</p><p>- What in case of TemplateBasedVMs... Store the grsecurity kernel
somewhere... - Using bind-dirs or have it stored in a per VM folder in dom0?
</p><p>- all automated, event based, non-blocking, and in background [to not
block the actual update process] → may not be great, user upgrades but
the grsecurity kernel upgrade is not guaranteed to be installed after
APT finished, but at some later point
</p><p>- would still result in lots of CPU [and hdd] usage over a long time
[perhaps for 5 - 20 VMs for average users] [user wondering about
mysterious systemd load, loud cpu fan]
</p><p>- somewhat a compilation farm that generates not one but many grsecurity
kernels and put them into a savings stock for later use
</p><p>- shutdown-or-not of
VM-just-automatically-started-for-grsecurity-compilation would be
troublesome (if the user manually interacted with that VM in meanwhile),
perhaps solvable by introducing states
</p><p>In summary, it sounds rather hacky and complex. Anyhow, perhaps it is
worth something as inspiration.
</p>
<!-- Saved in parser cache with key www.kicksecure.com:stable-pcache:idhash:3175-0!canonicalwww.kicksecure.com and timestamp 20220314105008 and revision id 54588. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a data-href="https://www.kicksecure.com/w/index.php?title=Dev/grsecurity&amp;oldid=54588" dir="ltr" href="https://www.kicksecure.com/w/index.php?title=Dev/grsecurity&amp;oldid=54588">https://www.kicksecure.com/w/index.php?title=Dev/grsecurity&amp;oldid=54588</a>"</div></div>
<div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div>
</div>
</div>
<div id="mw-data-after-content">
<div class="mw-cookiewarning-container"><div class="mw-cookiewarning-text"><span>By using our website, you acknowledge that you have read, understood and agreed to our Privacy Policy, Cookie Policy, Terms of Service, and E-Sign Consent.</span></div><form method="POST"><div class="oo-ui-layout oo-ui-horizontalLayout"><span aria-disabled="false" class="oo-ui-widget oo-ui-widget-enabled oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-progressive oo-ui-buttonWidget"><a aria-disabled="false" class="oo-ui-buttonElement-button" data-href="/wiki/Terms_of_Service" href="../Terms_of_Service" rel="nofollow" role="button" tabindex="0"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-progressive"></span><span class="oo-ui-labelElement-label">More information</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-progressive"></span></a></span><span aria-disabled="false" class="oo-ui-widget oo-ui-widget-enabled oo-ui-inputWidget oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-primary oo-ui-flaggedElement-progressive oo-ui-buttonInputWidget"><button aria-disabled="false" class="oo-ui-inputWidget-input oo-ui-buttonElement-button" name="disablecookiewarning" tabindex="0" type="submit" value="OK"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-invert"></span><span class="oo-ui-labelElement-label">OK</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-invert"></span></button></span></div></form></div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>
<div id="mw-head">

<div id="left-navigation">


</div>
<div id="right-navigation">


<div class="vector-search-box" id="p-search" role="search">
<div>
<h3>
<label for="searchInput">Search</label>
</h3>
<form action="/w/index.php" id="searchform">
<div data-search-loc="header-navigation" id="simpleSearch">
<input accesskey="f" autocapitalize="sentences" id="searchInput" name="search" placeholder="Search Kicksecure.html" title="Search Kicksecure [f]" type="search"/>
<input name="title" type="hidden" value="Special:Search"/>
<input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext.html" title="Search the pages for this text" type="submit" value="Search"/>
<input class="searchButton" id="searchButton" name="go.html" title="Go to a page with this exact name if it exists" type="submit" value="Go"/>
</div>
</form>
</div>
</div>
</div>
</div>
<div id="mw-panel">
<div id="p-logo" role="banner">
<a class="mw-wiki-logo" data-href="/wiki/Main_Page" href="../Main_Page.html" title="Visit the main page"></a>
</div>


</div>
</div>
<footer class="mw-footer" id="footer" role="contentinfo">
<ul id="footer-info">
<li id="footer-info-lastmod"> </li>
<li id="footer-info-copyright">By using this website, you acknowledge you have read, understood, and agree to be bound by these these agreements:</li>
</ul>
<ul id="footer-places">
<li id="footer-places-Terms of Service"><a data-href="/wiki/Terms_of_Service" href="../Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-places-Privacy Policy"><a data-href="/wiki/Privacy_Policy" href="../Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-places-Cookie Policy"><a data-href="/wiki/Cookie_Policy" href="../Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-places-E-Sign_Consent"><a data-href="/wiki/E-Sign_Consent" href="../E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-places-DMCA"><a class="mw-redirect" data-href="/wiki/DMCA" href="../DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-places-Imprint"><a data-href="/wiki/Imprint" href="../Imprint.html" title="Imprint">Imprint</a></li>
</ul>
</footer>

</body></html>