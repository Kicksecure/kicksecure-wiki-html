<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en"><!-- 
 single html processed by https://github.com/zTrix/webpage2html
 title: Nginx - Kicksecure
 url: ./Nginx
-->
<head>
<meta charset="utf-8"/>
<title>Nginx - Kicksecure</title>
<link rel=stylesheet type=text/css href=style.css>




<meta content="" name="ResourceLoaderDynamicStyles"/>

<meta content="MediaWiki 1.37.1" name="generator"/>
<meta content="telephone=no" name="format-detection"/>
<meta content="@Kicksecure" name="twitter:site"/>
<meta content="summary_large_image" name="twitter:card"/>
<link data-href="/w/index.php?title=Nginx&amp;action=edit" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit" rel="alternate.html" title="Edit" type="application/x-wiki"/>
<link data-href="/w/index.php?title=Nginx&amp;action=edit" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit" rel="edit.html" title="Edit"/>
<link data-href="/w/images/4/45/Kicksecure-home-favicon.ico" href="data:image/x-icon;base64,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" rel="shortcut icon"/>
<link data-href="/w/opensearch_desc.php" href="https://www.kicksecure.com/w/opensearch_desc.php" rel="search.html" title="Kicksecure (en)" type="application/opensearchdescription+xml"/>
<link data-href="https://www.kicksecure.com/w/api.php?action=rsd" href="https://www.kicksecure.com/w/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
<link data-href="/wiki/WgRightsPage" href="./WgRightsPage" rel="license"/>
<link data-href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" href="https://www.kicksecure.com/w/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate.html" title="Kicksecure Atom feed" type="application/atom+xml"/>
<noscript></noscript>

<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Nginx" property="og:title"/>
<meta content="Kicksecure" property="og:site_name"/>
<meta content="./Nginx" property="og:url"/>
<meta content="/w/images/thumb/f/fc/Kicksecure-twitter-post.jpg/470px-Kicksecure-twitter-post.jpg" property="og:image"/>
<meta content="2022-01-21T15:56:50Z" property="article:modified_time"/>
<meta content="2022-01-21T15:56:50Z" property="article:published_time"/>

</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject mw-editable page-Nginx rootpage-Nginx skin-vector action-view skin-vector-legacy"><div class="noprint" id="mw-page-base"></div>
<div class="noprint" id="mw-head-base"></div>
<div class="mw-body" id="content" role="main">
<a id="top"></a>
<div id="siteNotice"><div id="mw-dismissablenotice-anonplace"></div></div>
<div class="mw-indicators">
</div>
<h1 class="firstHeading" id="firstHeading">Nginx</h1>
<div class="vector-body" id="bodyContent">
<div class="noprint" id="siteSub">From Kicksecure</div>
<div id="contentSub"></div>
<div id="contentSub2"></div>
<div id="jump-to-nav"></div>
<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
<a class="mw-jump-link" href="#searchInput">Jump to search</a>
<div class="mw-body-content mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="mw-parser-output"><div aria-labelledby="mw-toc-heading" class="toc" id="toc" role="navigation"><input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/><div class="toctitle" dir="ltr" lang="en"><h2 id="mw-toc-heading">Contents</h2><span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#/etc/tor/torrc"><span class="tocnumber">1</span> <span class="toctext">/etc/tor/torrc</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#/etc/nginx/conf.d/hsts"><span class="tocnumber">2</span> <span class="toctext">/etc/nginx/conf.d/hsts</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#/etc/nginx/sites-available/00100.conf"><span class="tocnumber">3</span> <span class="toctext">/etc/nginx/sites-available/00100.conf</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#/etc/nginx/sites-available/www.conf"><span class="tocnumber">4</span> <span class="toctext">/etc/nginx/sites-available/www.conf</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#/etc/nginx/conf.d/www"><span class="tocnumber">5</span> <span class="toctext">/etc/nginx/conf.d/www</span></a></li>
</ul>
</div>
<h2><span id=".2Fetc.2Ftor.2Ftorrc"></span><span class="mw-headline" id="/etc/tor/torrc">/etc/tor/torrc</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Nginx&amp;action=edit&amp;section=1" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit&amp;section=1.html" title="Edit section: /etc/tor/torrc">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>HiddenServiceDir /var/lib/tor-instances/onionv3/onionv3/
HiddenServiceVersion 3

## web
HiddenServicePort 80 127.0.0.1:70
</pre>
<h2><span id=".2Fetc.2Fnginx.2Fconf.d.2Fhsts"></span><span class="mw-headline" id="/etc/nginx/conf.d/hsts">/etc/nginx/conf.d/hsts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Nginx&amp;action=edit&amp;section=2" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit&amp;section=2.html" title="Edit section: /etc/nginx/conf.d/hsts">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>## HSTS settings
</pre>
<h2><span id=".2Fetc.2Fnginx.2Fsites-available.2F00100.conf"></span><span class="mw-headline" id="/etc/nginx/sites-available/00100.conf">/etc/nginx/sites-available/00100.conf</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Nginx&amp;action=edit&amp;section=3" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit&amp;section=3.html" title="Edit section: /etc/nginx/sites-available/00100.conf">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>## default_server, apex domain (non-subdomain) or invalid subdomain catch-all

## redirect plaintext clearnet non-subdomain to TLS non-subdomain
server {
   listen 80 default_server;
   listen [::]:80 default_server;
   return 301 https://kicksecure.com$request_uri;
}

## redirect TLS clearnet non-subdomain to TLS www subdomain
server {
   listen 443 ssl http2 default_server;
   listen [::]:443 ssl http2 default_server;

   ssl_certificate /etc/letsencrypt/live/kicksecure.com/fullchain.pem;
   ssl_certificate_key /etc/letsencrypt/live/kicksecure.com/privkey.pem;
   ssl_trusted_certificate /etc/letsencrypt/live/kicksecure.com/fullchain.pem;
   include /etc/nginx/conf.d/hsts;

   return 301 https://www.kicksecure.com$request_uri;
}

## redirect onion non-subdomain to www subdomain
server {
   listen 127.0.0.1:70;
   server_name w5j6stm77zs6652pgsij4awcjeel3eco7kvipheu6mtr623eyyehj4yd.onion;

   return 301 http://www.w5j6stm77zs6652pgsij4awcjeel3eco7kvipheu6mtr623eyyehj4yd.onion$request_uri;
}
</pre>
<h2><span id=".2Fetc.2Fnginx.2Fsites-available.2Fwww.conf"></span><span class="mw-headline" id="/etc/nginx/sites-available/www.conf">/etc/nginx/sites-available/www.conf</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Nginx&amp;action=edit&amp;section=4" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit&amp;section=4.html" title="Edit section: /etc/nginx/sites-available/www.conf">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>## http clearnet port 80 unencrypted listener
server {
   listen 80;
   listen [::]:80;
   server_name www.kicksecure.com;
   return 301 https://www.kicksecure.com$request_uri;
}

## clearnet www
server {
   listen 443 ssl http2;
   listen [::]:443 ssl http2;
   server_name www.kicksecure.com;

   ssl_certificate /etc/letsencrypt/live/kicksecure.com/fullchain.pem;
   ssl_certificate_key /etc/letsencrypt/live/kicksecure.com/privkey.pem;
   ssl_trusted_certificate /etc/letsencrypt/live/kicksecure.com/fullchain.pem;
   include /etc/nginx/conf.d/hsts;

   more_set_headers "Onion-Location: http://www.w5j6stm77zs6652pgsij4awcjeel3eco7kvipheu6mtr623eyyehj4yd.onion$request_uri";

   include /etc/nginx/conf.d/www;
}

## onion www
server {
   listen 127.0.0.1:70;
   server_name www.w5j6stm77zs6652pgsij4awcjeel3eco7kvipheu6mtr623eyyehj4yd.onion;

   more_set_headers "X-Robots-Tag: noindex, nofollow";

   include /etc/nginx/conf.d/www;
}
</pre>
<h2><span id=".2Fetc.2Fnginx.2Fconf.d.2Fwww"></span><span class="mw-headline" id="/etc/nginx/conf.d/www">/etc/nginx/conf.d/www</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a data-href="/w/index.php?title=Nginx&amp;action=edit&amp;section=5" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;action=edit&amp;section=5.html" title="Edit section: /etc/nginx/conf.d/www">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>## actual nginx config shared among TLS and onion goes here
</pre>
<!-- Saved in parser cache with key www.kicksecure.com:stable-pcache:idhash:3091-0!canonicalwww.kicksecure.com and timestamp 20220323011934 and revision id 54190. Serialized with JSON.
 -->
</div>
<div class="printfooter">Retrieved from "<a data-href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;oldid=54190" dir="ltr" href="https://www.kicksecure.com/w/index.php?title=Nginx&amp;oldid=54190">https://www.kicksecure.com/w/index.php?title=Nginx&amp;oldid=54190</a>"</div></div>
<div class="catlinks catlinks-allhidden" data-mw="interface" id="catlinks"></div>
</div>
</div>
<div id="mw-data-after-content">
<div class="mw-cookiewarning-container"><div class="mw-cookiewarning-text"><span>By using our website, you acknowledge that you have read, understood and agreed to our Privacy Policy, Cookie Policy, Terms of Service, and E-Sign Consent.</span></div><form method="POST"><div class="oo-ui-layout oo-ui-horizontalLayout"><span aria-disabled="false" class="oo-ui-widget oo-ui-widget-enabled oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-progressive oo-ui-buttonWidget"><a aria-disabled="false" class="oo-ui-buttonElement-button" data-href="/wiki/Terms_of_Service" href="./Terms_of_Service" rel="nofollow" role="button" tabindex="0"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-progressive"></span><span class="oo-ui-labelElement-label">More information</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-progressive"></span></a></span><span aria-disabled="false" class="oo-ui-widget oo-ui-widget-enabled oo-ui-inputWidget oo-ui-buttonElement oo-ui-buttonElement-framed oo-ui-labelElement oo-ui-flaggedElement-primary oo-ui-flaggedElement-progressive oo-ui-buttonInputWidget"><button aria-disabled="false" class="oo-ui-inputWidget-input oo-ui-buttonElement-button" name="disablecookiewarning" tabindex="0" type="submit" value="OK"><span class="oo-ui-iconElement-icon oo-ui-iconElement-noIcon oo-ui-image-invert"></span><span class="oo-ui-labelElement-label">OK</span><span class="oo-ui-indicatorElement-indicator oo-ui-indicatorElement-noIndicator oo-ui-image-invert"></span></button></span></div></form></div>
</div>
<div id="mw-navigation">
<h2>Navigation menu</h2>
<div id="mw-head">

<div id="left-navigation">


</div>
<div id="right-navigation">


<div class="vector-search-box" id="p-search" role="search">
<div>
<h3>
<label for="searchInput">Search</label>
</h3>
<form action="/w/index.php" id="searchform">
<div data-search-loc="header-navigation" id="simpleSearch">
<input accesskey="f" autocapitalize="sentences" id="searchInput" name="search" placeholder="Search Kicksecure.html" title="Search Kicksecure [f]" type="search"/>
<input name="title" type="hidden" value="Special:Search"/>
<input class="searchButton mw-fallbackSearchButton" id="mw-searchButton" name="fulltext.html" title="Search the pages for this text" type="submit" value="Search"/>
<input class="searchButton" id="searchButton" name="go.html" title="Go to a page with this exact name if it exists" type="submit" value="Go"/>
</div>
</form>
</div>
</div>
</div>
</div>
<div id="mw-panel">
<div id="p-logo" role="banner">
<a class="mw-wiki-logo" data-href="/wiki/Main_Page" href="./Main_Page.html" title="Visit the main page"></a>
</div>


</div>
</div>
<footer class="mw-footer" id="footer" role="contentinfo">
<ul id="footer-info">
<li id="footer-info-lastmod"> </li>
<li id="footer-info-copyright">By using this website, you acknowledge you have read, understood, and agree to be bound by these these agreements:</li>
</ul>
<ul id="footer-places">
<li id="footer-places-Terms of Service"><a data-href="/wiki/Terms_of_Service" href="./Terms_of_Service.html" title="Terms of Service">Terms of Service</a></li>
<li id="footer-places-Privacy Policy"><a data-href="/wiki/Privacy_Policy" href="./Privacy_Policy.html" title="Privacy Policy">Privacy Policy</a></li>
<li id="footer-places-Cookie Policy"><a data-href="/wiki/Cookie_Policy" href="./Cookie_Policy.html" title="Cookie Policy">Cookie Policy</a></li>
<li id="footer-places-E-Sign_Consent"><a data-href="/wiki/E-Sign_Consent" href="./E-Sign_Consent.html" title="E-Sign Consent">E-Sign Consent</a></li>
<li id="footer-places-DMCA"><a class="mw-redirect" data-href="/wiki/DMCA" href="./DMCA.html" title="DMCA">DMCA</a></li>
<li id="footer-places-Imprint"><a data-href="/wiki/Imprint" href="./Imprint.html" title="Imprint">Imprint</a></li>
</ul>
</footer>

</body></html>